<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>태그 및 게임 관리 시스템</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- DB 동기화 확인 모달 -->
  <div id="sync-confirm-modal" class="modal-overlay">
    <div class="modal">
      <h2 class="modal-title">DB 재설정 확인</h2>
      <p style="text-align: center;">
        이 작업은 모든 게임 문서에 태그 정보를 동기화합니다.<br>
        계속 진행하시겠습니까?
      </p>
      
      <div class="modal-actions">
        <button id="cancel-sync-btn" style="background-color: #6b7280;">취소</button>
        <button id="confirm-sync-btn">확인</button>
      </div>
    </div>
  </div>

  <!-- 게임 삭제 확인 모달 -->
  <div id="delete-game-confirm-modal" class="modal-overlay">
    <div class="modal">
      <h2 class="modal-title">게임 삭제 확인</h2>
      <p style="text-align: center;">
        이 게임을 삭제하시겠습니까?<br>
        <strong id="delete-game-title"></strong>
      </p>
      
      <div class="modal-actions">
        <button id="cancel-delete-game-btn" style="background-color: #6b7280;">취소</button>
        <button id="confirm-delete-game-btn" style="background-color: #ef4444;">삭제</button>
      </div>
    </div>
  </div>

  <!-- 전체 게임 삭제 확인 모달 -->
  <div id="delete-all-games-confirm-modal" class="modal-overlay">
    <div class="modal">
      <h2 class="modal-title">전체 게임 삭제 확인</h2>
      <p style="text-align: center;">
        선택한 플랫폼의 모든 게임을 삭제하시겠습니까?<br>
        <strong>이 작업은 되돌릴 수 없습니다!</strong>
      </p>
      
      <div class="modal-actions">
        <button id="cancel-delete-all-games-btn" style="background-color: #6b7280;">취소</button>
        <button id="confirm-delete-all-games-btn" style="background-color: #ef4444;">전체 삭제</button>
      </div>
    </div>
  </div>

  <div class="container">
    <h1>관리 시스템</h1>
    
    <!-- 탭 메뉴 -->
    <div class="tabs">
      <div class="tab active" data-tab="tags">태그 관리</div>
      <div class="tab" data-tab="game-management">GCS 게임 관리</div>
      <div class="tab" data-tab="fs-game-management">Firestore 게임 관리</div>
    </div>
    
    <!-- 태그 관리 탭 -->
    <div id="tags-tab" class="tab-content active">
      <div class="header-container">
        <h2>태그 관리</h2>
        <div class="header-actions">
          <button id="sync-db-btn" class="sync-btn">DB 재설정</button>
        </div>
      </div>
      
      <div class="search-add-section">
        <div class="search-container">
          <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
          <input type="search" id="tag-search-input" placeholder="태그 검색...">
        </div>
        
        <div class="add-tag-form">
          <h2>새 태그 추가</h2>
          <div class="add-tag-inputs">
            <input type="text" id="new-tag-jp" placeholder="일본어 태그">
            <input type="text" id="new-tag-kr" placeholder="한국어 태그">
            <input type="number" id="new-tag-priority" placeholder="우선순위" value="10">
          </div>
          <button id="add-tag-btn">태그 추가</button>
        </div>
      </div>
      
      <table>
        <thead>
          <tr>
            <th>일본어 태그</th>
            <th>한국어 태그</th>
            <th>우선순위</th>
            <th>액션</th>
          </tr>
        </thead>
        <tbody id="tags-table-body">
          <tr>
            <td colspan="4" class="loading-row">로딩 중...</td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <!-- GCS 게임 관리 탭 -->
    <div id="game-management-tab" class="tab-content">
      <div class="header-container">
        <h2>GCS 게임 관리</h2>
        <div class="header-actions">
          <select id="game-platform-select">
            <option value="rj">RJ 코드</option>
          </select>
          <button id="load-games-btn">목록 불러오기</button>
          <button id="delete-all-games-btn" class="delete-btn">전체 삭제</button>
          <div class="search-container inline-search">
            <input type="text" id="game-code-input" placeholder="게임 코드 입력 (예: RJ123456)">
            <button id="search-game-btn">검색</button>
          </div>
        </div>
      </div>
      
      <div class="game-management-container">
        <div class="game-list-sidebar">
          <div class="search-container">
            <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input type="search" id="game-list-search" placeholder="게임 검색...">
          </div>
          <div id="game-list" class="game-list">
            <div class="loading-message">플랫폼을 선택하고 목록 불러오기를 클릭하세요</div>
          </div>
        </div>
        <div id="game-details-container" class="game-details-container">
          <div id="game-details" class="game-details">
            <div class="no-selection-message">왼쪽 목록에서 게임을 선택하거나 게임 코드로 검색하세요</div>
          </div>
          <div id="game-edit-form" class="game-edit-form">
            <form id="game-form" class="game-form">
              <div class="form-row">
                <div class="form-group">
                  <label for="game-title">제목</label>
                  <input type="text" id="game-title" name="title">
                </div>
                <div class="form-group">
                  <label for="game-circle">서클</label>
                  <input type="text" id="game-circle" name="circle">
                </div>
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="game-release-date">출시일</label>
                  <input type="date" id="game-release-date" name="release_date">
                </div>
                <div class="form-group">
                  <label for="game-price">가격</label>
                  <input type="number" id="game-price" name="price">
                </div>
              </div>
              
              <div class="form-group">
                <label for="game-description">설명</label>
                <textarea id="game-description" name="description"></textarea>
              </div>
              
              <div class="form-group">
                <label>태그 (일본어)</label>
                <div id="tags-jp-container" class="tag-chips"></div>
              </div>
              
              <div class="form-group">
                <label>태그 (한국어)</label>
                <div id="tags-kr-container" class="tag-chips"></div>
              </div>
              
              <div class="form-group">
                <label for="game-primary-tag">주요 태그</label>
                <input type="text" id="game-primary-tag" name="primary_tag">
              </div>
              
              <div class="form-actions">
                <button type="button" id="cancel-edit-btn">취소</button>
                <button type="submit" id="save-game-btn">저장</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Firestore 게임 관리 탭 -->
    <div id="fs-game-management-tab" class="tab-content">
      <div class="header-container">
        <h2>Firestore 게임 관리</h2>
        <div class="header-actions">
          <select id="fs-game-platform-select">
            <option value="rj">RJ 코드</option>
          </select>
          <button id="fs-load-games-btn">목록 불러오기</button>
          <button id="fs-delete-all-games-btn" class="delete-btn">전체 삭제</button>
          <button id="fs-tag-stats-btn" class="stats-btn">태그 통계</button>
          <div class="search-container inline-search">
            <input type="text" id="fs-game-code-input" placeholder="게임 코드 입력 (예: RJ123456)">
            <button id="fs-search-game-btn">검색</button>
          </div>
        </div>
      </div>
      
      <div class="game-management-container">
        <div class="game-list-sidebar">
          <div class="search-container">
            <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input type="search" id="fs-game-list-search" placeholder="게임 검색...">
          </div>
          <div id="fs-game-list" class="game-list">
            <div class="loading-message">플랫폼을 선택하고 목록 불러오기를 클릭하세요</div>
          </div>
        </div>
        <div id="fs-game-details-container" class="game-details-container">
          <div id="fs-game-details" class="game-details">
            <div class="no-selection-message">왼쪽 목록에서 게임을 선택하거나 게임 코드로 검색하세요</div>
          </div>
          <div id="fs-game-edit-form" class="game-edit-form">
            <form id="fs-game-form" class="game-form">
              <div class="form-row">
                <div class="form-group">
                  <label for="fs-game-title">제목</label>
                  <input type="text" id="fs-game-title" name="title">
                </div>
                <div class="form-group">
                  <label for="fs-game-circle">서클</label>
                  <input type="text" id="fs-game-circle" name="circle">
                </div>
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="fs-game-release-date">출시일</label>
                  <input type="date" id="fs-game-release-date" name="release_date">
                </div>
                <div class="form-group">
                  <label for="fs-game-price">가격</label>
                  <input type="number" id="fs-game-price" name="price">
                </div>
              </div>
              
              <div class="form-group">
                <label for="fs-game-description">설명</label>
                <textarea id="fs-game-description" name="description"></textarea>
              </div>
              
              <div class="form-group">
                <label>태그 (일본어)</label>
                <div id="fs-tags-jp-container" class="tag-chips"></div>
              </div>
              
              <div class="form-group">
                <label>태그 (한국어)</label>
                <div id="fs-tags-kr-container" class="tag-chips"></div>
              </div>
              
              <div class="form-group">
                <label for="fs-game-primary-tag">주요 태그</label>
                <input type="text" id="fs-game-primary-tag" name="primary_tag">
              </div>
              
              <div class="form-actions">
                <button type="button" id="fs-cancel-edit-btn">취소</button>
                <button type="submit" id="fs-save-game-btn">저장</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 태그 통계 모달 -->
    <div id="tag-stats-modal" class="modal-overlay">
      <div class="modal tag-stats-modal">
        <h2 class="modal-title">태그 사용 통계</h2>
        <div id="tag-stats-content" class="tag-stats-content">
          <div class="loading-message">통계 데이터를 불러오는 중...</div>
        </div>
        <div class="modal-actions">
          <button id="close-tag-stats-btn">닫기</button>
        </div>
      </div>
    </div>
  </div>
  
  <div id="toast" class="toast">
    <div class="toast-title" id="toast-title"></div>
    <div class="toast-message" id="toast-message"></div>
  </div>
  
  <script src="script.js"></script>
</body>
</html>
